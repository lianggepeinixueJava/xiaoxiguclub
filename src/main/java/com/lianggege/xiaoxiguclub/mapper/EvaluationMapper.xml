<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lianggege.xiaoxiguclub.mapper.EvaluationMapper">
    <resultMap id="BaseResultMap" type="com.lianggege.xiaoxiguclub.model.Evaluation">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        <id column="ID" property="id" jdbcType="VARCHAR"/>
        <result column="EVALUATOR" property="evaluator" jdbcType="VARCHAR"/>
        <result column="EVALUATION" property="evaluation" jdbcType="VARCHAR"/>
        <result column="EVALUATE_DATE" property="evaluateDate" jdbcType="TIMESTAMP"/>
        <result column="SRC" property="src" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        ID, EVALUATOR, EVALUATION, EVALUATE_DATE, SRC
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        select
        <include refid="Base_Column_List"/>
        from EVALUATION
        where ID = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        delete from EVALUATION
        where ID = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.lianggege.xiaoxiguclub.model.Evaluation">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        insert into EVALUATION (ID, EVALUATOR, EVALUATION,
        EVALUATE_DATE, SRC)
        values (#{id,jdbcType=VARCHAR}, #{evaluator,jdbcType=VARCHAR}, #{evaluation,jdbcType=VARCHAR},
        #{evaluateDate,jdbcType=TIMESTAMP}, #{src,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.lianggege.xiaoxiguclub.model.Evaluation">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        insert into EVALUATION
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="evaluator != null">
                EVALUATOR,
            </if>
            <if test="evaluation != null">
                EVALUATION,
            </if>
            <if test="evaluateDate != null">
                EVALUATE_DATE,
            </if>
            <if test="src != null">
                SRC,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="evaluator != null">
                #{evaluator,jdbcType=VARCHAR},
            </if>
            <if test="evaluation != null">
                #{evaluation,jdbcType=VARCHAR},
            </if>
            <if test="evaluateDate != null">
                #{evaluateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="src != null">
                #{src,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.lianggege.xiaoxiguclub.model.Evaluation">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        update EVALUATION
        <set>
            <if test="evaluator != null">
                EVALUATOR = #{evaluator,jdbcType=VARCHAR},
            </if>
            <if test="evaluation != null">
                EVALUATION = #{evaluation,jdbcType=VARCHAR},
            </if>
            <if test="evaluateDate != null">
                EVALUATE_DATE = #{evaluateDate,jdbcType=TIMESTAMP},
            </if>
            <if test="src != null">
                SRC = #{src,jdbcType=VARCHAR},
            </if>
        </set>
        where ID = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.lianggege.xiaoxiguclub.model.Evaluation">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Dec 27 08:45:15 CST 2018.
        -->
        update EVALUATION
        set EVALUATOR = #{evaluator,jdbcType=VARCHAR},
        EVALUATION = #{evaluation,jdbcType=VARCHAR},
        EVALUATE_DATE = #{evaluateDate,jdbcType=TIMESTAMP},
        SRC = #{src,jdbcType=VARCHAR}
        where ID = #{id,jdbcType=VARCHAR}
    </update>
    <!--根据小戏骨成员ID查询小戏骨人物评价-->
    <select id="selectEvaluationsBySid" resultMap="BaseResultMap">
        select *
        from (select e.*, ROWNUM as rowno
              from (select *
                    from EVALUATION
                    where ID in
                          (select EID
                           from STAR_EVALUATION_RELATION
                           where SID = #{sid})
                    order by EVALUATE_DATE desc) e
              where ROWNUM &lt;= #{endIndex})
        where rowno &gt;= #{startIndex}
    </select>
</mapper>